
@{
    ViewBag.Title = "main";
    _4S.Model.home lst = ViewBag.model;
    List<_4S.Model.T_Base_Employee> emp = ViewBag.lst;
}
<main class="main-content p-5" role="main" id="principal">
    <div class="row">
        <div class="col-md-6 col-lg-6 col-xl-3 mb-5">
            <div class="card card-tile card-xs bg-primary bg-gradient text-center">
                <div class="card-body p-4">
                    <!-- Accepts .invisible: Makes the items. Use this only when you want to have an animation called on it later -->
                    <div class="tile-left">
                        <i class="batch-icon batch-icon-user-alt batch-icon-xxl"></i>
                    </div>
                    <div class="tile-right">
                        <div class="tile-number">@lst.UserNumber</div>
                        <div class="tile-description">客户数量</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-6 col-xl-3 mb-5">
            <div class="card card-tile card-xs bg-secondary bg-gradient text-center">
                <div class="card-body p-4">
                    <div class="tile-left">
                        <i class="batch-icon batch-icon-tag-alt-2 batch-icon-xxl"></i>
                    </div>
                    <div class="tile-right">
                        <div class="tile-number">¥@lst.TotalSales</div>
                        <div class="tile-description">总营业额</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-6 col-xl-3 mb-5">
            <div class="card card-tile card-xs bg-primary bg-gradient text-center">
                <div class="card-body p-4">
                    <div class="tile-left">
                        <i class="batch-icon batch-icon-list batch-icon-xxl"></i>
                    </div>
                    <div class="tile-right">
                        <div class="tile-number">@lst.SalesOrderNumber</div>
                        <div class="tile-description">销售订单</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-6 col-xl-3 mb-5">
            <div class="card card-tile card-xs bg-secondary bg-gradient text-center">
                <div class="card-body p-4">
                    <div class="tile-left">
                        <i class="batch-icon batch-icon-star batch-icon-xxl"></i>
                    </div>
                    <div class="tile-right">
                        <div class="tile-number">@lst.RepairOrderNumber</div>
                        <div class="tile-description">维修订单</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6 col-lg-6 col-xl-8 mb-5">
            <div class="card">
                <div class="card-header">
                    Sales Overview
                    <div class="header-btn-block">
                        <span class="data-range dropdown">
                            <a href="#" class="btn btn-primary dropdown-toggle"
                               id="navbar-dropdown-sales-overview-header-button" data-toggle="dropdown"
                               data-flip="false" aria-haspopup="true" aria-expanded="false">
                                <i class="batch-icon batch-icon-calendar"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right"
                                 aria-labelledby="navbar-dropdown-sales-overview-header-button">
                                <a class="dropdown-item" href="today">Today</a>
                                <a class="dropdown-item" href="week">This Week</a>
                                <a class="dropdown-item" href="month">This Month</a>
                                <a class="dropdown-item active" href="year">This Year</a>
                            </div>
                        </span>
                    </div>
                </div>
                <div class="card-body">
                    <div class="card-chart" data-chart-color-1="#07a7e3" data-chart-color-2="#32dac3"
                         data-chart-legend-1="Sales ($)" data-chart-legend-2="Orders"
                         data-chart-height="281">
                        <canvas id="sales-overview"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-6 col-xl-4 mb-5">
            <div class="card card-md card-team-members">
                <div class="card-header">
                    Team Members
                </div>
                <div class="card-media-list">
                    <div class="media clickable" data-qp-link="profiles-member-profile.html">
                        <div class="profile-picture bg-gradient bg-primary has-message float-right d-flex mr-3">
                            <img src="/quillpro/assets/img/profile-pic.jpg" width="44" height="44">
                        </div>
                        <div class="media-body">
                            <div class="heading mt-1">
                                Johanna Quinn
                            </div>
                            <div class="subtext">jquinn897</div>
                        </div>
                    </div>

                    <div class="media clickable" data-qp-link="profiles-member-profile.html">
                        <div class="profile-picture bg-gradient bg-primary has-message float-right d-flex mr-3">
                            <img src="/quillpro/assets/img/profile-pic-3.jpg" width="44" height="44">
                        </div>
                        <div class="media-body">
                            <div class="heading mt-1">
                                Teal'c Jaffa
                            </div>
                            <div class="subtext">tealc</div>
                        </div>
                    </div>

                    <div class="media clickable" data-qp-link="profiles-member-profile.html">
                        <div class="profile-picture bg-gradient bg-secondary float-right d-flex mr-3">
                            <img src="/quillpro/assets/img/profile-pic-2.jpg" width="44" height="44">
                        </div>
                        <div class="media-body">
                            <div class="heading mt-1">
                                Samantha Carter
                            </div>
                            <div class="subtext">samanthac</div>
                        </div>
                    </div>

                    <div class="media clickable" data-qp-link="profiles-member-profile.html">
                        <div class="profile-picture bg-gradient bg-secondary has-message float-right d-flex mr-3">
                            <img src="/quillpro/assets/img/profile-pic-4.jpg" width="44" height="44">
                        </div>
                        <div class="media-body">
                            <div class="heading mt-1">
                                General Landry
                            </div>
                            <div class="subtext">glandry</div>
                        </div>
                    </div>

                    <div class="media clickable" data-qp-link="profiles-member-profile.html">
                        <div class="profile-picture bg-gradient bg-primary float-right d-flex mr-3">
                            <img src="/quillpro/assets/img/profile-pic-6.jpg" width="44" height="44">
                        </div>
                        <div class="media-body">
                            <div class="heading mt-1">
                                Jacklin O'neil
                            </div>
                            <div class="subtext">jakjak</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mb-5">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <a href="/home/add">员工列表</a>
                </div>
                <div class="card-table table-responsive">
                    <table id="tbList" class="table table-hover align-middle">
                        <thead class="thead-light">
                            <tr>
                                <th>Member</th>
                                <th>PhoneNumber</th>
                                <th>Email</th>
                                <th class="text-center">Office</th>
                                <th class="text-center">EntryDate</th>
                                <th class="text-center">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{
                                foreach (var item in emp)
                                {
                            <tr>
                                <td>
                                    <div class="media">
                                        <div class="profile-picture bg-gradient bg-primary has-message float-right d-flex mr-3">
                                            <img src="/static/assets/img/profile-pic.jpg" width="44" height="44">
                                        </div>
                                        <div class="media-body">
                                            <div class="heading mt-1">
                                                @item.RealName
                                            </div>
                                            <div class="subtext">NO.@item.Id</div>
                                        </div>
                                    </div>
                                </td>
                                <td>@item.PhoneNumber</td>
                                <td>
                                    <a href="#">@item.Email</a>
                                </td>
                                <td class="text-center">
                                    @if (item.Office.IndexOf("经理") > 0)
                                    {
                                        <span class="badge badge-danger">@item.Office</span>
                                    }
                                    else
                                    {
                                        <span class="badge badge-primary">@item.Office</span>
                                    }
                                </td>

                                <td class="text-center">@item.EntryDate.ToString("yyyy-MM-dd")</td>
                                <td class="text-right">
                                    <a class="btn btn-primary">
                                        <i class="batch-icon batch-icon-eye" onclick="edit(@item.Id)"></i>
                                    </a>
                                    <a class="btn btn-success">
                                        <i class="batch-icon batch-icon-bin-alt-2" onclick="del(@item.Id)"></i>
                                    </a>
                                </td>
                            </tr>
                                }
                            }

                        </tbody>
                    </table>
                </div>
                
            </div>
        </div>
    </div>
    <div class="row mb-4">
        <div class="col-md-12">
            <footer>
                Powered by - <a href="http://base5builder.com/?click_source=quillpro_footer_link"
                                target="_blank"
                                style="font-weight:300;color:#ffffff;background:#1d1d1d;padding:0 3px;">
                    Base<span style="color:#ffa733;font-weight:bold">5</span>Builder
                </a>
            </footer>
        </div>
    </div>
</main>

<script>
    function del(id) {
            $.ajax({

                type: "post",
                url: "/home/Delete",
                dataType: "json",
                data: { id: id },
                success: function (result) {
                    //****
                    if (result.code == 1) {
                        //刷新
                        $("#tbList").bootstrapTable('refresh');
                        window.location.reload();
                        // location.reload();
                    } else
                        alert("删除失败");
                },
                error: function () {
                    alert("通讯失败");
                }
            });
    }
    function edit(id) {
        window.location.href = "/home/edit?id=" + id;
    }
</script>